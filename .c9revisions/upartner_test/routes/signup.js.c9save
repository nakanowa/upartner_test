{"ts":1354963934563,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1354964030503,"patch":[[{"diffs":[[1,"/*\n * トップページ表示\n */\nexports.signup = function(req, res){\n    //res.charset = 'ISO-8859-1';\n  res.render('index', { title: 'U-PARTNER' ,\n                        about: 'このサイトはEXPRESSで作られています。'\n                        });\n};\n\n/*\n * サインアップ\n */\nexports.signup = function(req, res){\n    \n    // users model 読み込み\n    var users = require('../models/users');    \n    \n    var username = req.body.username;\n    var userid = req.body.user;\n    var email = req.body.email;\n    var adminpass = req.body.adminpass;\n    var confirmpass = req.body.confirmpass;\n    \n    // 入力チェック\n    if (username === '' || userid === '' || email === '' || adminpass === '' || confirmpass === ''){\n            res.render('index', {\n            title: 'U-PARTNER' ,\n            about : '入力していない項目があります'\n        });\n        return;\n    }\n    \n    // パスワードチェック\n    if (adminpass !== confirmpass){\n        res.render('index', {\n            title: 'U-PARTNER' ,\n            about : 'パスワードに誤りがあります。'\n        });\n        return;\n    }\n    \n        // データの取得\n    users.findOne({userid:userid}, function(err , users){\n        \n        // ユーザ情報取得チェック\n        if(users !== null || users.email === email){\n                    console.log('1');\n                    res.render('index', {\n                        title: 'U-PARTNER' ,\n                        about : \"既にユーザが存在します\"\n                    });\n                return;\n        }\n \n    });\n   \n        \n    // アカウント情報の取得\n    var user = new users();\n    user.userid = userid;\n    user.password = adminpass;\n    user.name = username;\n    user.email = email;\n\n\n    // データの書き込み\n    user.save(function(err){\n        if(err){\n            res.render('index', {\n            title: 'U-PARTNER' ,\n            about : 'アカウント作成に失敗しました。'\n            });\n            return;\n        }else{\n            res.render('index', {\n            title: 'U-PARTNER' ,\n            about : 'アカウントが作成されました。'\n            });\n            return;\n        }\n    });\n    \n        \n        \n};\n\n"]],"start1":0,"start2":0,"length1":0,"length2":1971}]],"length":1971,"saved":false}
{"ts":1354964041163,"patch":[[{"diffs":[[0,"ジ表示\n */\nexports."],[-1,"signup"],[1,"index"],[0," = function(req,"]],"start1":11,"start2":11,"length1":38,"length2":37}]],"length":1970,"saved":false}
{"ts":1354964214579,"patch":[[{"diffs":[[0,"rts."],[-1,"signup"],[1,"do"],[0," = f"]],"start1":243,"start2":243,"length1":14,"length2":10}]],"length":1966,"saved":false}
{"ts":1354964462906,"patch":[[{"diffs":[[0,"res.render('"],[-1,"index"],[1,"signup"],[0,"', { title: "]],"start1":91,"start2":91,"length1":29,"length2":30},{"diffs":[[0,"    res.render('"],[-1,"index"],[1,"signup"],[0,"', {\n           "]],"start1":669,"start2":669,"length1":37,"length2":38},{"diffs":[[0,"    res.render('"],[-1,"index"],[1,"signup"],[0,"', {\n           "]],"start1":862,"start2":862,"length1":37,"length2":38},{"diffs":[[0,"    res.render('"],[-1,"index"],[1,"signup"],[0,"', {\n           "]],"start1":1213,"start2":1213,"length1":37,"length2":38},{"diffs":[[0,"    res.render('"],[-1,"index"],[1,"signup"],[0,"', {\n           "]],"start1":1637,"start2":1637,"length1":37,"length2":38},{"diffs":[[0,"render('"],[-1,"index"],[1,"signup"],[0,"', {\n   "]],"start1":1802,"start2":1802,"length1":21,"length2":22}]],"length":1972,"saved":false}
{"ts":1354964818042,"patch":[[{"diffs":[[0,"rts."],[-1,"do"],[1,"signup"],[0," = f"]],"start1":244,"start2":244,"length1":10,"length2":14}]],"length":1976,"saved":false}
{"contributors":[],"silentsave":false,"ts":1355027269017,"patch":[[{"diffs":[[0," サインアップ\n */\n"],[1," exports.signup = function(req,res){\n     res.redirect('/');\n     \n   \n }\n \n"],[0,"exports.sign"]],"start1":228,"start2":228,"length1":24,"length2":100}]],"length":2052,"saved":false}
{"ts":1355027272188,"patch":[[{"diffs":[[0,"/');"],[-1,"\n     \n "],[0,"  \n "]],"start1":296,"start2":296,"length1":16,"length2":8}]],"length":2044,"saved":false}
{"contributors":[],"silentsave":false,"ts":1355393621223,"patch":[[{"diffs":[[0,"l){\n"],[-1,"                    console.log('1');\n"],[0,"    "]],"start1":1227,"start2":1227,"length1":46,"length2":8}]],"length":2006,"saved":false}
{"ts":1355393694045,"patch":[[{"diffs":[[0,"ull "],[-1,"|| users.email === email"],[0,"){\n"],[1,""],[0,"    "]],"start1":1200,"start2":1200,"length1":35,"length2":11},{"diffs":[[0,"      }\n"],[1,"        \n        \n        // ユーザ情報取得チェック\n        if(users.email === email){\n                    res.render('signup', {\n                        title: 'U-PARTNER' ,\n                        about : \"既にユーザが存在します\"\n                    });\n                return;\n        }"],[0," \n    })"]],"start1":1391,"start2":1391,"length1":16,"length2":283}]],"length":2249,"saved":false}
{"ts":1355393705596,"patch":[[{"diffs":[[0," }\n        \n"],[-1,"        \n"],[0,"        // ユ"]],"start1":1396,"start2":1396,"length1":33,"length2":24}]],"length":2240,"saved":false}
{"contributors":[],"silentsave":false,"ts":1355404708032,"patch":[[{"diffs":[[0,"nup', { "],[1,"user : req.session.user \n                        ,"],[0,"title: '"]],"start1":106,"start2":106,"length1":16,"length2":66},{"diffs":[[0,": 'U-PARTNER' ,\n"],[-1,""],[0,"                "]],"start1":169,"start2":169,"length1":32,"length2":32},{"diffs":[[0,", {\n            "],[1,"user : req.session.user \n            ,"],[0,"title: 'U-PARTNE"]],"start1":814,"start2":814,"length1":32,"length2":70},{"diffs":[[0,", {\n            "],[1,"user : req.session.user \n            ,"],[0,"title: 'U-PARTNE"]],"start1":1045,"start2":1045,"length1":32,"length2":70},{"diffs":[[0,"                "],[1,"user : req.session.user \n                        ,"],[0,"title: 'U-PARTNE"]],"start1":1384,"start2":1384,"length1":32,"length2":82},{"diffs":[[0,"                "],[1,"user : req.session.user \n                        ,"],[0,"title: 'U-PARTNE"]],"start1":1693,"start2":1693,"length1":32,"length2":82},{"diffs":[[0,", {\n            "],[1,"user : req.session.user \n            ,"],[0,"title: 'U-PARTNE"]],"start1":2154,"start2":2154,"length1":32,"length2":70},{"diffs":[[0,"der('signup', {\n"],[-1,""],[0,"            titl"]],"start1":2337,"start2":2337,"length1":32,"length2":32},{"diffs":[[0,"        "],[1,"user : req.session.user \n            ,"],[0,"title: '"]],"start1":2357,"start2":2357,"length1":16,"length2":54}]],"length":2542,"saved":false}
